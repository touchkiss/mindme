# MindMe 后端接口文档

本文档提供了 MindMe 后端服务 REST API 接口的详细参考。

## 基础 URL
默认值：`http://localhost:8091/api`

---

## 1. 数据摄入与活动追踪

用于捕获来自浏览器扩展和代理的原始数据的接口。

### 摄入 (`/ingest`)
| 接口 | 方法 | 描述 |
| :--- | :--- | :--- |
| `/activity` | `POST` | 批量上传来自扩展程序的 `ActivityRecord` 对象。 |
| `/agent-result` | `POST` | 接收来自自主浏览器代理的结果（例如：网页监控检查结果）。 |
| `/watch` | `GET` | 列出当前所有正在监控内容变化的页面。 |
| `/watch/updates` | `GET` | 列出已检测到内容变化的监控页面。 |
| `/watch/{id}/seen` | `POST` | 将特定监控页面的更新标记为“已读”。 |
| `/watch/{id}` | `DELETE` | 停止监控特定页面。 |

### 活动 (`/activities`)
| 接口 | 方法 | 描述 |
| :--- | :--- | :--- |
| `/` | `GET` | 列出活动历史记录，支持过滤器（查询、主机名、标签、分数等）。 |
| `/{id}` | `GET` | 获取单个活动记录的详细信息。 |
| `/{id}` | `DELETE` | 删除特定的活动记录。 |
| `/batch/delete` | `POST` | 通过 ID 批量删除多个活动记录。 |
| `/batch/analyze` | `POST` | 将记录标记为由 AI 引擎重新分析。 |
| `/batch/boost` | `POST` | 手动增加特定记录的 `interestScore`（兴趣分数）。 |
| `/stats` | `GET` | 获取摘要计数（已分析 vs 待处理）。 |

---

## 2. 知识管理

用于与提取的知识和知识图谱交互的接口。

### 知识条目 (`/knowledge`)
| 接口 | 方法 | 描述 |
| :--- | :--- | :--- |
| `/` | `GET` | 列出提取的知识条目，支持搜索和类别过滤。 |
| `/categories` | `GET` | 获取所有唯一类别的列表（例如：技术、金融）。 |
| `/{id}` | `PUT` | 更新知识条目的内容或标签。 |
| `/stats` | `GET` | 总条目数和类别分布的摘要。 |

### 知识图谱 (`/graph`)
| 接口 | 方法 | 描述 |
| :--- | :--- | :--- |
| `/` | `GET` | 获取用于可视化的图谱结构（节点和边）。 |
| `/rebuild` | `POST` | 强制根据活动历史重新构建知识图谱。 |

---

## 3. 探索与个性化趋势

用于发现新信息和个性化热点话题的接口。

### 认知与探索 (`/cognition`)
| 接口 | 方法 | 描述 |
| :--- | :--- | :--- |
| `/gaps` | `GET` | 识别用户知识库中尚未深入探索的领域。 |
| `/horizon` | `GET` | 获取“认知视界卡片” —— AI 推荐的来自不同领域的概念。 |

### 趋势 (`/trends`)
| 接口 | 方法 | 描述 |
| :--- | :--- | :--- |
| `/` | `GET` | 列出来自 GitHub、HackerNews、V2EX 等平台的聚合趋势。 |
| `/refresh` | `POST` | 手动触发趋势的抓取和 AI 评分。 |

---

## 4. 搜索、对话与报告

基于 AI 的搜索、问答和摘要生成。

### 搜索与对话
| 接口 | 方法 | 描述 |
| :--- | :--- | :--- |
| `/search` | `GET` | 跨活动的简单关键词搜索。 |
| `/chat` | `POST` | 基于 RAG 的对话接口。可以针对你的历史记录提出问题。 |

### 报告 (`/reports`)
| 接口 | 方法 | 描述 |
| :--- | :--- | :--- |
| `/daily` | `GET` | 生成/获取每日摘要报告。 |
| `/weekly` | `GET` | 生成/获取每周摘要报告。 |
| `/monthly` | `GET` | 生成/获取每月摘要报告。 |

---

## 5. 其他

### 阅读队列 (`/reading-queue`)
| 接口 | 方法 | 描述 |
| :--- | :--- | :--- |
| `/` | `GET` | 列出“稍后阅读”队列中的项目。 |
| `/` | `POST` | 向阅读队列添加新 URL。 |
| `/{id}/read` | `PATCH` | 将项目标记为已读。 |

### 站点分析 (`/sites`)
| 接口 | 方法 | 描述 |
| :--- | :--- | :--- |
| `/` | `GET` | 域名级别的分析（访问计数、时长）。 |
| `/knowledge` | `GET` | 按来源域名对知识条目进行分组。 |
